@model ML.Trucks
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    //string rol = Context.Session.GetString("Rol") ?? "";
    string rol = "Administrador";
}
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <h2>Lista de Trucks Registradas</h2>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-sm-12">
            <h5>Consultar, Agregar, Editar o Eliminar Trucks Registradas en la Base</h5>
            <hr />
        </div>
    </div>
    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success">
            <i class="bi bi-check-all"> @TempData["Success"] </i>
        </div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">
            <i class="bi bi-x-square"> @TempData["Error"] </i>

        </div>
    }
    @if (TempData["Agregado"] != null)
    {
        <div class="alert alert-success">
            <i class="bi bi-floppy"> @TempData["Agregado"] </i>

        </div>
    }
    <div class="row">
        @if (rol != "" && rol == "Administrador")
        {
            <div class="col-12 col-md-6 col-lg-4 mb-3">
                @Html.ActionLink("+", "Formulario", "Trucks", new { @class = "btn btn-success" })
            </div>
        }
    </div>

    <div class="row">
        <div class="row">
            <div class="col-12">
                @if (Model.Camionetas != null)
                {
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <td> Editar </td>
                                    <td> Año </td>
                                    <td> Color </td>
                                    <td> Plates </td>
                                    <td> Eliminar </td>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (ML.Trucks truck in Model.Camionetas)
                                {
                                    <tr>
                                        <input type="hidden" name="IdTruck" value="@truck.IdTruck" />
                                        <td>
                                            @if (rol != "" && rol == "Administrador")
                                            {
                                                @Html.ActionLink("Editar", "Formulario", "Trucks", new { IdTruck = truck.IdTruck }, new { @class = "btn btn-warning" })
                                            }
                                        </td>

                                        <td>@truck.Year</td>
                                        <td>@truck.Color </td>
                                        <td>@truck.Plates</td>
                                        <td>
                                            @if (rol != "" && rol == "Administrador")
                                            {
                                                <a href="@Url.Action("Delete", "Trucks", new { IdTruck = truck.IdTruck })" onclick="return confirm('Estas seguro que quieres eliminar a este usuario?')">
                                                    <i class="bi bi-trash-fill"></i>
                                                </a>
                                            }
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-danger" role="alert">
                        <i class="bi bi-question-octagon">No se encontraron Trucks!</i>
                    </div>
                }
            </div>
        </div>
    </div>
</div>